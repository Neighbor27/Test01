<!DOCTYPE html>
<html>
  <head>
    <!-- head에는 모든 페이지 공통 설정만 남깁니다 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <title>Stitch Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
      tailwind.config = {
        theme: {
          fontFamily: {
            sans: ['Montserrat', 'Noto Sans KR', 'sans-serif'],
          }
        }
      }
    </script>
  </head>
  <body>
    <!-- 레이아웃을 불러올 자리 -->
    <div id="layout-placeholder"></div>

    <!-- 페이지 고유 콘텐츠 (스타일 포함) -->
    <div id="page-content" class="hidden">
      <!-- 이 페이지에서만 사용하는 스타일 -->
      <style>
        .card {
          border: 1px solid #dce0e5;
          transition: transform 0.2s ease-out, border-color 0.2s ease-out, box-shadow 0.2s ease-out;
          cursor: pointer;
        }
        .card:not(.selected):hover {
          transform: translateY(-4px);
          border-color: #a0a8b1;
          box-shadow: 0 3px 12px rgba(0,0,0,0.1);
        }
        .card.selected {
          animation: subtle-light-pulse 3s infinite alternate ease-in-out;
        }
        @keyframes subtle-light-pulse {
          from { box-shadow: 0 0 8px 1px #1466b8; }
          to { box-shadow: 0 0 4px 2px #1574c1; }
        }
      </style>

      <!-- 페이지 실제 내용 -->
      <div class="flex flex-1 flex-col py-8 px-4 md:px-40 md:py-16">
        <div class="layout-content-container flex flex-col w-full max-w-[700px] self-center">
          <div class="pb-5 px-4 md:px-0">
            <h2 class="text-[28px] sm:text-[32px] md:text-[42px] font-bold text-[#111418] leading-tight">
              마음 가는 상대는?
            </h2>
          </div>
          <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 p-4 md:p-0 md:mt-5 justify-items-center">
            <!-- 카드 아이템들... -->
            <div class="card flex flex-col justify-center items-center gap-2 rounded-lg border bg-white p-4 sm:p-5 w-full">
                <!-- ... SVG and h2 ... -->
                <h2 class="text-base sm:text-lg font-bold leading-tight text-[#111418] whitespace-nowrap">직장 동료</h2>
            </div>
            <div class="card flex flex-col justify-center items-center gap-2 rounded-lg border bg-white p-4 sm:p-5 w-full">
                <!-- ... SVG and h2 ... -->
                <h2 class="text-base sm:text-lg font-bold leading-tight text-[#111418] whitespace-nowrap">부모님</h2>
            </div>
             <!-- ... 나머지 카드들도 동일하게 ... -->
          </div>
          <div class="flex px-4 md:px-0 py-4 justify-end">
            <div id="next-button-placeholder"></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 페이지별 기능 초기화 함수
      const initializePage = () => {
        const cards = document.querySelectorAll('.card');
        const nextButton = document.getElementById('next-button');

        cards.forEach((card) => {
          card.addEventListener('click', () => {
            document.querySelector('.card.selected')?.classList.remove('selected');
            card.classList.add('selected');
          });
        });

        nextButton?.addEventListener('click', () => {
          const selectedCard = document.querySelector('.card.selected h2');
          if (selectedCard) {
            localStorage.setItem('selectedTarget', selectedCard.textContent);
            window.location.href = 'page3.html';
          } else {
            alert('상대방을 선택해 주세요.');
          }
        });
      };
      // 'componentsLoaded' 이벤트가 발생하면 페이지 기능 실행
      document.addEventListener('componentsLoaded', initializePage);
    </script>
    <script src="loadComponents.js"></script>
  </body>
</html>
