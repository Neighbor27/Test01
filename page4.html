<!DOCTYPE html>
<html>
  <head>
    <!-- head에는 모든 페이지 공통 설정만 남깁니다 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <title>Stitch Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
      tailwind.config = {
        theme: {
          fontFamily: {
            sans: ['Montserrat', 'Noto Sans KR', 'sans-serif'],
          }
        }
      }
    </script>
  </head>
  <body>
    <!-- 레이아웃을 불러올 자리 -->
    <div id="layout-placeholder"></div>

    <!-- 페이지 고유 콘텐츠 (스타일 포함) -->
    <div id="page-content" class="hidden">
      <!-- 이 페이지에서만 사용하는 스타일. -->
      <style>
        .card {
          border: 1px solid #dce0e5;
          /* *** 수정: box-shadow에 transition을 추가하여 부드럽게 만듭니다 *** */
          transition: transform 0.2s ease-out, border-color 0.2s ease-out, box-shadow 0.3s ease-out;
          cursor: pointer;
        }
        /* *** 수정: 애니메이션을 제거하고, 고정된 box-shadow를 적용합니다 *** */
        .card.selected {
          box-shadow: 0 0 6px 1.5px #1574c1;
          border-color: #a0a8b1;
        }
        @media (hover: hover) and (pointer: fine) {
          .card:not(.selected):hover {
            transform: translateY(-4px);
            border-color: #a0a8b1;
            box-shadow: 0 3px 12px rgba(0,0,0,0.1);
          }
          .card.selected:hover {
            transform: translateY(-4px);
          }
        }
        @media (hover: none) and (pointer: coarse) {
          .card.selected {
            transform: translateY(-4px) !important;
          }
        }
        /* 애니메이션 키프레임은 더 이상 필요하지 않으므로 주석 처리하거나 삭제 가능합니다.
        @keyframes subtle-light-pulse { ... }
        */
      </style>

      <!-- 페이지 실제 내용 -->
      <div class="flex flex-col flex-1 py-8 px-4 md:px-40 md:py-16">
        <div class="layout-content-container flex w-full max-w-[700px] flex-col self-center">
          <div class="pb-5 px-4 md:px-0">
            <h2 id="target-name" class="text-[28px] sm:text-[32px] md:text-[43px] font-bold leading-tight">
              상대방의 관심사는?
            </h2>
          </div>
          <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 p-4 md:p-0 md:mt-5 justify-items-center">
            <!-- ... 카드 아이템들은 여기에 그대로 들어갑니다 ... -->
            <div class="card flex flex-col justify-center items-center gap-2 rounded-lg bg-white p-4 sm:p-5 w-full">
              <div class="text-[#111418] h-6 w-6 sm:h-8 sm:w-8"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256"><path d="M216,104H102.09L210,75.51a8,8,0,0,0,5.68-9.84l-8.16-30a15.93,15.93,0,0,0-19.42-11.13L35.81,64.74a15.75,15.75,0,0,0-9.7,7.4,15.51,15.51,0,0,0-1.55,12L32,111.56c0,.14,0,.29,0,.44v88a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V112A8,8,0,0,0,216,104ZM192.16,40l6,22.07-22.62,6L147.42,51.83Zm-66.69,17.6,28.12,16.24-36.94,9.75L88.53,67.37Zm-79.4,44.62-6-22.08,26.5-7L94.69,89.4ZM208,200H48V120H208v80Z"></path></svg></div>
              <h2 class="text-base sm:text-lg font-bold leading-tight text-[#111418] whitespace-nowrap">영화</h2>
            </div>
            <!-- ... 나머지 카드들도 모두 여기에 ... -->
          </div>
          <div class="flex px-4 md:px-0 py-4 justify-end">
            <div id="next-button-placeholder"></div>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener('componentsLoaded', () => {
        const targetNameElement = document.getElementById('target-name');
        const selectedTargetName = localStorage.getItem('selectedTarget') || '상대방';
        targetNameElement.textContent = `${selectedTargetName}의 관심사는?`;

        const cards = document.querySelectorAll('.card');
        const nextButton = document.getElementById('next-button');

        cards.forEach((card) => {
          card.addEventListener('click', () => {
            card.classList.toggle('selected');
          });
        });

        if (nextButton) {
          nextButton.addEventListener('click', () => {
            const selectedCards = document.querySelectorAll('.card.selected');
            if (selectedCards.length > 0) {
              const selectedInterests = Array.from(selectedCards).map(card => card.querySelector('h2').textContent);
              localStorage.setItem('selectedInterests', JSON.stringify(selectedInterests));
              window.location.href = `page5.html?name=${encodeURIComponent(selectedTargetName)}`;
            } else {
              alert('상대방의 관심사를 하나 이상 선택해주세요.');
            }
          });
        }
      });
    </script>
    <script src="loadComponents.js"></script>
  </body>
</html>
